extends layout

block content
    form#addProductForm
        label#errorLabel
        br
        label(for='title') title:
        input#title(value=game.title type='text' name='title')
        br
        label(for='price') price:
        input#price(value=game.price type='number' name='price')
        br
        label(for='picture') picture:
        input#picture(value=game.picture type='text' name='picture')
        br
        label(for='fsk') fsk:
        input#fsk(value=game.fsk type='number' name='fsk')
        br
        label(for='description') description:
        input#description(value=game.description type='text' name='description')
        br
        label(for='studio_id') studio_id:
        input#studio_id(value=game.studio_id type='number' name='studio_id')
        br
        button#addGame Game hinzuf√ºgen
    script.
        document.getElementById('addGame')?.addEventListener('click', function (form) {
        form.preventDefault();
        let data = {
            title: document.getElementById('title').value,
            price: document.getElementById('price').value,
            picture: document.getElementById('picture').value,
            fsk: document.getElementById('fsk').value,
            description: document.getElementById('description').value,
            studio_id: document.getElementById('studio_id').value
        };
        fetch('/addGame', {
            method: 'PUT',
            headers: {
             'Accept': 'application/json',
             'Content-Type': 'application/json'
          },
            body: JSON.stringify(data)
          }).then(function (response) {

          response.text().then(function (text) {
            if (!response.ok) {
                setErrorLabel("Konnte die EAN in der Datenbank nicht finden");
            }else {
                window.location = '/'
            }
          });
        });
        });
          